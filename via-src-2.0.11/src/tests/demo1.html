<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  <title>42度空间-window.postMessage()跨域消息传递</title>
</head>
<body>
<div>
  <input id="text" type="text" value="42度空间" />
  <button id="send" >发送消息</button>
</div>
<iframe id="receiver" src="http://res.42du.cn/static/html/receiver.html" width="500" height="60">
  <p>你的浏览器不支持IFrame。</p>
</iframe>
<script>
  window.onload = function() {
    var receiver = document.getElementById('receiver').contentWindow;
    var btn = document.getElementById('send');
    btn.addEventListener('click', function (e) {
      e.preventDefault();
      var val = document.getElementById('text').value;
      receiver.postMessage("Hello "+val+"！", "http://res.42du.cn");
    });
  }
</script>
</body>
</html>
